<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Estudiantes</title>
  <style>
    table, th, td { border: 2px solid black; border-collapse: collapse;border-radius: 5px; text-align: center;}
    th, td { padding: 8px;  }
    input { margin: 4px; }
    button { margin-left: 4px; }

  </style>
</head>
<body>

  <h1 style="text-align: center;margin-left: 0 auto;margin-right: 0 auto;">Lista de Estudiantes</h1>

  <label for="nombre" style="margin: 0 auto;">Nombre:</label>
  <input  type="text" id="nombre" placeholder="Ej: Ana Pérez" />

  <label for="clase" style="margin: 0 auto;">Clase:</label>
  <input  type="text" id="clase" placeholder="Ej: Física" />

  <button onclick="agregarEstudiante()">Agregar</button>

  <table style="margin-top: 100px;margin: 0 auto;">
    <thead>
      <tr>
        <th>Nombre</th>
        <th>Clase</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody id="tabla-cuerpo">
      <!-- Filas dinámicas -->
    </tbody>
  </table>

  <script>
    function agregarEstudiante() {
  const nombre = document.getElementById("nombre").value.trim();
  const clase = document.getElementById("clase").value.trim();

  if (nombre === "" || clase === "") {
    alert("Por favor, completa ambos campos.");
    return;
  }

  fetch("/estudiantes", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ nombre, clase })
  })
  .then(res => {
    if (res.ok) {
      cargarEstudiantes(); // recarga la tabla desde la BD
      document.getElementById("nombre").value = "";
      document.getElementById("clase").value = "";
    }
  });
}

function eliminarEstudiante(id) {
  fetch(`/estudiantes/${id}`, {
    method: "DELETE"
  }).then(res => {
    if (res.ok) cargarEstudiantes();
  });
}

function actualizarEstudiante(id, nombreActual, claseActual) {
  const nuevoNombre = prompt("Nuevo nombre:", nombreActual);
  const nuevaClase = prompt("Nueva clase:", claseActual);

  if (!nuevoNombre || !nuevaClase) return;

  fetch(`/estudiantes/${id}`, {
    method: "PUT",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ nombre: nuevoNombre, clase: nuevaClase })
  }).then(res => {
    if (res.ok) cargarEstudiantes();
  });
}
  </script>

</body>
</html>